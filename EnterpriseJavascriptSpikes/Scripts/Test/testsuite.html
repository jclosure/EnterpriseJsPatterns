<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="../jquery.mockjax.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="http://github.com/jquery/qunit/raw/master/qunit/qunit.css"
        type="text/css" media="screen" />
    <script type="text/javascript" src="http://github.com/jquery/qunit/raw/master/qunit/qunit.js"></script>
    <!-- begin test targets -->
    <script src="../prototypal.js" type="text/javascript"></script>
    <script src="../app.js" type="text/javascript"></script>

    <!-- end test targets -->
    <script>
        $(document).ready(function () {



            module("Framework Module");

            test("prototypal inheritence tests", function () {

                var sup = function () { };
                sup.doAction = function () { return true; };

                var sub = Object.create(sup);


                ok(sub.doAction(), "subclasses inherit functions on their parent's prototype");
            });


            module("App Module");

            test("person tests", function () {

                //arrange
                var attendeeItem = $('<li />').attendee({
                    name: "Joel Holder",
                    smarts: 10
                });

                //act
                attendeeItem.data('attendee').listen();

                //assert
                ok(attendeeItem.find('.smarts').text() == '(11)', "an attendees' smarts increase when they listen");
            });

            module("Ajax Module");

            test("mocked messaging", function () {

                $.mockjax({
                    url: '/some/json',
                    dataType: 'json',
                    responseText: {
                        say: "JSON Here"
                    }
                });

                //Pause the test first
                stop();

                var wasMessageMocked = function (message) {
                    ok(message.say.match(/JSON Here/), "the message was successfully mocked");
                    start();
                }

                $.ajax({
                    url: '/some/json',
                    dataType: 'json',
                    success: function (json) {
                        wasMessageMocked(json);
                    }
                });




            });

        });
    </script>
</head>
<body>
    <h1 id="qunit-header">
        Enterprise Javascript Test Suite</h1>
    <h2 id="qunit-banner">
    </h2>
    <h2 id="qunit-userAgent">
    </h2>
    <ol id="qunit-tests">
    </ol>
